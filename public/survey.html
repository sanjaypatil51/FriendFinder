<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey</title>
    <!-- Latest compiled and minified CSS & JS -->
     <!-- Chosen for drop down values-->
     <link rel="stylesheet" href=reset.css>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  
     <!-- jQuery -->
     <script src="https://code.jquery.com/jquery.js"></script>
     <!--Bootstrap javascript-->
     <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
         integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
         crossorigin="anonymous"></script>
     <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
         integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
         crossorigin="anonymous"></script>

    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

   





</head>

<body>

    <div class="container">
        <form id="surveyForm">
            <h2>Survey Questions</h2>
            <hr>

            <h3><strong>About You</strong></h3>
            <h4>Name (Required)</h4>
            <input type="text" id="name" class="form-control" required>

            <h4>Link to Photo Image (Required)</h4>
            <input type="text" id="photo" class="form-control" required>

            <hr>
            <h4><strong>Question 1</strong></h4>
            <h5>Your mind is always buzzing with unexplored ideas and plans.</h5>
            <select class="chosen-select" id="q1" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 2</strong></h4>
            <h5>You are never late, nor early, you arrive precisely when you mean to.</h5>
            <select class="chosen-select" id="q2" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 3</strong></h4>
            <h5>You often find yourself in a position to give out bits of wisdom to the ones around you.</h5>
            <select class="chosen-select" id="q3" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 4</strong></h4>
            <h5>Generally speaking, you rely more on your experience than your imagination.</h5>
            <select class="chosen-select" id="q4" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 5</strong></h4>
            <h5>You enjoy getting to know new people.</h5>
            <select class="chosen-select" id="q5" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 6</strong></h4>
            <h5>You try to respond to emails as soon as possible.</h5>
            <select class="chosen-select" id="q6" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 7</strong></h4>
            <h5>You often get so lost in your thoughts, You forget your surroundings.</h5>
            <select class="chosen-select" id="q7" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 8</strong></h4>
            <h5>I have a critical eye.</h5>
            <select class="chosen-select" id="q8" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 9</strong></h4>
            <h5>You tend to find one precious object and love it forever.</h5>
            <select class="chosen-select" id="q9" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <h4><strong>Question 10</strong></h4>
            <h5>You think that everyoneâ€™s views should be respected regardless of whether they are supported by facts or
                not.</h5>
            <select class="chosen-select" id="q10" required>
                <option value=""></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br>
            <br>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary submit">Submit</button>
        </form>

        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a
                        href="https://github.com/afhaque/friendfinder">GitHub Repo</a></p>
            </div>
        </footer>

        <!-- Modal -->
    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img"
                        src="" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    </div>

    

</body>

<script type="text/javascript">


    $("#surveyForm").submit(function (event) {
        event.preventDefault();
        console.log("in submit")

        // Here we grab the form elements
        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [$("#q1").val().trim(),
            $("#q2").val().trim(),
            $("#q3").val().trim(),
            $("#q4").val().trim(),
            $("#q5").val().trim(),
            $("#q6").val().trim(),
            $("#q7").val().trim(),
            $("#q8").val().trim(),
            $("#q9").val().trim(),
            $("#q10").val().trim()
            ]

        };

        console.log(newFriend);

        // This line is the magic. It"s very similar to the standard ajax function we used.
        // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
        // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
        // depending on if a tables is available or not.

        $.post("/api/friends", newFriend,
            function (data) {
                console.log("---resposne back")
                console.log(data)

                // var newDiv = `<div><h4>New Friends<h4>
                //         <p><strong>${data.name}<strong></p>
                //         <img src=${data.photo} class="img-fluid" style=width:60px></div>`
                // //$(".friend-modal .modal-content").last().append(newDiv)
                // //show modal window, this is bootstrap library
                // $(".friend-modal").modal()

                //console.log(newDiv)

                $("#match-name").text(data.name);
                $("#match-img").attr("src", data.photo+" class=img-fluid");

                // Show the modal with the best match
                $("#results-modal").modal("toggle");


            });

    });



</script>

</html>